{"version":3,"sources":["webpack:///./src/app/services/product.service.ts"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { environment } from '../../environments/environment';\nimport { Http, RequestOptions, Headers } from '@angular/http';\nimport { UtilService } from './util.service';\nimport { map } from 'rxjs/internal/operators/map';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductService {\n  domain = environment.domain;\n  authToken;\n  options;\n\n  constructor(\n    private http: Http,\n    private utilService: UtilService\n  ) { }\n\n  createAuthenticationHeaders() {\n    this.loadToken(); // Get token so it can be attached to headers\n    // Headers configuration options\n    this.options = new RequestOptions({\n      headers: new Headers({\n        'Content-Type': 'application/json', // Format set to JSON\n        'authorization': this.authToken // Attach token\n      })\n    });\n  }\n\n  // Function to get token from client local storage\n  loadToken() {\n    this.authToken = localStorage.getItem(btoa('token')); // Get token and asssign to variable to be used elsewhere\n  }\n\n  // Function to check product's id exist\n  checkProductId(id) {\n    return this.utilService\n    .getHttpPromise(this.http.get(this.domain + 'api/product/check-product-id/' + id)\n    .pipe(map(res => res.json())));\n  }\n\n  // Function to get a product record by _id\n  getProduct(id) {\n    return this.utilService\n    .getHttpPromise(this.http.get(this.domain + 'api/product/get-product/' + id)\n    .pipe(map(res => res.json())));\n  }\n\n  // Function to get products\n  getProducts(query, key, page, limit, sort) {\n    let params = '?';\n    if (query) {\n      params += '&query=' + query;\n    }\n    if (key) {\n      params += '&key=' + key;\n    }\n    if (page) {\n      params += '&page=' + page;\n    }\n    if (limit) {\n      params += '&limit=' + limit;\n    }\n    if (sort) {\n      params += '&sort=' + sort;\n    }\n    return this.utilService\n    .getHttpPromise(this.http.get(this.domain + 'api/product/get' + params)\n    .pipe(map(res => res.json())));\n  }\n\n  // Function to create a new product\n  createProduct(product) {\n    this.createAuthenticationHeaders();\n    return this.utilService\n    .getHttpPromise(this.http.post(this.domain + 'api/product/create', product, this.options)\n    .pipe(map(res => res.json())));\n  }\n\n  // Function to update product\n  updateProduct(product) {\n    this.createAuthenticationHeaders();\n    return this.utilService\n    .getHttpPromise(this.http.put(this.domain + 'api/product/update', product, this.options)\n    .pipe(map(res => res.json())));\n  }\n\n  // Function to delete product\n  deleteProduct(id) {\n    this.createAuthenticationHeaders();\n    return this.utilService\n    .getHttpPromise(this.http.delete(this.domain + 'api/product/delete/' + id, this.options)\n    .pipe(map(res => res.json())));\n  }\n}\n"],"sourceRoot":""}